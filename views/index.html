<!DOCTYPE html>
<html>
<head>
    <!--<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />-->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Welcome to Birdway!</title>
    <link href="/plugs/artDialog/skins/default.css" rel="stylesheet" />
    <script src="/js/jquery-1.7.2.min.js"></script>
    <script src="/plugs/artDialog/artDialog.min.js"></script>
    <script src="/plugs/artDialog/artDialog.plugins.min.js"></script>
    <style type="text/css">
        html{height:100%}
        body{height:100%;
            margin-top: 0px;
            margin-right: 0px;
            margin-left: 0px;
            margin-bottom: 0px;
            padding-top: 0px;
            padding-right: 0px;
            padding-left: 0px;
            padding-bottom: 0px;
            background:url('/images/ajax-loader-bar.gif') no-repeat center;
            text-align:center;
            overflow:hidden;}
        #map{z-index:-1;height:100%;width:100%;}
        #console{position:relative;bottom:104px;z-index:1;
            height:100px;
            width:100%;
            border:solid 4px #363232;border-bottom:none;}
        #buttons{width:300px;margin:0 auto;}
        .ctrlbut{cursor:pointer;}
        #me{float:left;height:32px;width:32px;background:url('/images/me.png') no-repeat center;}
        #partner{float:left;height:32px;width:32px;background:url('/images/partner.png') no-repeat center;}

    </style>
    <script type="text/javascript">
        /*
        function initialize() {
            document.body.style.backgroundImage = '';

            var map = new BMap.Map('map');
            var point = new BMap.Point(116.404, 39.915);
            map.centerAndZoom(point, 5);
            map.enableScrollWheelZoom;

            //添加控件
            map.addControl(new BMap.NavigationControl());  //平移缩放控件
            map.addControl(new BMap.ScaleControl());  //一个比例尺控件
            map.addControl(new BMap.OverviewMapControl());  //缩略图控件
            map.addControl(new BMap.MapTypeControl());  //地图类型控件
            map.enableScrollWheelZoom();// 启用滚轮放大缩小
            map.enableKeyboard();   //启用键盘操作
            map.setCurrentCity("北京");  // 仅当设置城市信息时，MapTypeControl的切换功能才能可用

            // 编写自定义函数，创建标注
            function addMarker(point, index){
                // 创建图标对象
                var myIcon = new BMap.Icon('/images/logo.png', new BMap.Size(23, 25), {
                    // 指定定位位置。
                    // 当标注显示在地图上时，其所指向的地理位置距离图标左上角各偏移10像素和25像素，您可以看到在本例中该位置即是图标中央下端的尖角位置。
                    offset: new BMap.Size(30, 50)
                    // 设置图片偏移。
                    // 当您需要从一幅较大的图片中截取某部分作为标注图标时，您需要指定大图的偏移位置，此做法与css sprites技术类似。
                    //imageOffset: new BMap.Size(0, 0 - index * 25)   // 设置图片偏移
                });
                // 创建标注对象并添加到地图
                var marker = new BMap.Marker(point, {icon: myIcon});
                marker.addEventListener("click", function(){
                    alert("您点击了标注");
                });
                map.addOverlay(marker);
            }
            addMarker(point, null);

            var marker1 = new BMap.Marker(point);        // 创建标注
            map.addOverlay(marker1);                     // 将标注添加到地图中

            map.addEventListener("click", function(e){
                alert(e.point.lng + ", " + e.point.lat);
            });

            var opts = {
                width : 250,     // 信息窗口宽度
                height: 100,     // 信息窗口高度
                title : "Hello"  // 信息窗口标题
            }
            var infoWindow = new BMap.InfoWindow("World", opts);  // 创建信息窗口对象
            map.openInfoWindow(infoWindow, map.getCenter());      // 打开信息窗口
        }

        function loadScript() {
            var script = document.createElement("script");
            script.src = "http://api.map.baidu.com/api?v=1.3&callback=initialize";
            document.body.appendChild(script);
        }

        window.onload = loadScript;
         */
    </script>

    <script type="text/javascript">
    $(function(){
        $('#me').click(function(){
            /*
            art.dialog({
                id: 'login',
                title: '登录Birdway',
                content: '帐号:<input id="username" type="text" value="Email">',
                button: [
                    {
                        value: '登录',
                        callback: function () {
                            //$.post();

                            this.content('登录成功').time(10);
                            return false;
                        },
                        focus: true
                    },
                    {
                        value: '注册',
                        callback: function () {
                            alert('注册按钮')
                        }
                    }
                ]
            });
             */
            var dialog = art.dialog({
                id: 'login_dialog',
                title: '登录Birdway',
                content: '帐号：<input id="loginname" type="text" /><br />'
                        + '密码：<input id="password" type="password" value="" />',
                lock: true,
                fixed: true,
                button: [
                    {
                        value: '登录',
                        callback: function () {
                            var un = document.getElementById('loginname');
                            var pw = document.getElementById('password');
                            $.post("/user_login", { username: un, password: pw },
                                function(data) {
                                    if (data == 'OK') {
                                        dialog.icon = 'succeed';
                                        dialog.content('登录成功').time(5);
                                    } else {
                                        un.style.borderColor = 'red';
                                        pw.style.borderColor = 'red';
                                        dialog.shake();
                                        return false;
                                    }
                                });

                            //this.content('登录成功').time(100);

//                            pw.select();
//                            pw.focus();
//                            this.shake();
                            return false;
                        },
                        focus: true
                    },
                    {
                        value: '注册',
                        callback: function () {
                            alert('注册按钮')
                            return false;
                        }
                    }
                ]
            });
        });
    });

    </script>
</head>
<body>

<div id="map"></div>

<div id="console">
    <div id="buttons">
    <div id="me" class="ctrlbut"></div>
    <div id="partner" class="ctrlbut"></div>
    </div>
</div>

</body>
</html>