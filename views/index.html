<!DOCTYPE html>
<html>
<head>
    <!--<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />-->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Welcome to Birdway!</title>
    <link href="/css/home/index.css" rel="stylesheet" />
    <link href="/lib/artDialog/skins/default.css" rel="stylesheet" />
    <link href="/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- 请注意JS加载顺序 -->
    <script src="/lib/headjs/head.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        head.ready("baiduapi", function(){
            initialize();
        });
        head.js(
                {baiduapi: "http://api.map.baidu.com/api?v=1.3"},
                {baidumap: "/js/system/map/baidumap.js"},
                {jquery: "/lib/jquery/jquery-1.7.2.min.js"},
                {artDialog: "/lib/artDialog/artDialog.min.js"},
                {artDplugins: "/lib/artDialog/artDialog.plugins.min.js"},
                {ejs: "/lib/ejs/ejs_production.js"},
                {blurjs: "/lib/blurjs/blur.min.js"},
                {bootstrap: "/lib/bootstrap/js/bootstrap.min.js"},
                // label is optional
                "/js/home/index.js"
        );

    </script>
    <!-- <script src="/js/jquery-1.7.2.min.js" type="text/javascript"></script> -->
    <!--
        <script src="http://api.ditu.aliyun.com/map.js" type="text/javascript"></script>
        <script src="/js/system/aliyunmap.js" type="text/javascript"></script>
    -->

    <!-- <script src="/js/system/baidumap.js" type="text/javascript"></script>

    <script src="/plugs/artDialog/artDialog.min.js" type="text/javascript"></script>
    <script src="/plugs/artDialog/artDialog.plugins.min.js" type="text/javascript"></script>

    <script src="/js/home/index.js" type="text/javascript"></script>
    -->
    <script src="/socket.io/socket.io.js" type="text/javascript"></script>



    <script type="text/javascript">
        var socket = io.connect('http://127.0.0.1:8088');
        var point = null;
        var marker = null;
        socket.on('publicpoints', function (data) {
            map.removeOverlay(marker);
            point = new BMap.Point(data.lon, data.lat);
            marker = new BMap.Marker(point);        // 创建标注
            map.addOverlay(marker);
//            console.log(data);
//            socket.emit('my other event', { my: 'data' });
        });
    </script>

</head>
    <body>
    <div id="mapdiv" ></div>
    <div id="map_search">
        <form id="road_search" class="form-search">
            <input type="text" class="span5">
            <button type="submit" class="btn">搜索</button>
        </form>
    </div>
    <div id="console">
        <div id="buttons">
            <div id="myself" class="ctrlbut"></div>
            <div id="partner" class="ctrlbut"></div>
        </div>
    </div>
    <div id="myselfinfo">
        <table>
            <tr>
                <td></td>
            </tr>
        </table>
    </div>
    </body>
    </html>